#!/bin/bash

JS_SRC="./js"
JS_DIST="./dist/js"
JS_MOVE_DEST="../paginabanda/static/js"

clean() {
    echo "Cleaning..."

    rm -r $JS_DIST/*

    rm -r $JS_MOVE_DEST/*
}

compile() {
    echo "Compiling..."

    r.js -o require.build.js
    uglifyjs $JS_SRC/lib/magnific-popup-1.0.0.js -c -m > $JS_DIST/lib/magnific-popup.min.js
    uglifyjs $JS_SRC/lib/echo-1.7.0.js -c -m > $JS_DIST/lib/echo.min.js
}

move() {
    echo "Moving..."

    cp $JS_DIST/banda.js $JS_MOVE_DEST/banda.js
    cp $JS_DIST/entrypoint.js $JS_MOVE_DEST/entrypoint.js

    mkdir $JS_MOVE_DEST/views/
    cp $JS_DIST/views/contactoview.js $JS_MOVE_DEST/views/contactoview.js
    cp $JS_DIST/views/fotosview.js $JS_MOVE_DEST/views/fotosview.js
    cp $JS_DIST/views/inicioview.js $JS_MOVE_DEST/views/inicioview.js
    cp $JS_DIST/views/muroview.js $JS_MOVE_DEST/views/muroview.js
    cp $JS_DIST/views/musicaview.js $JS_MOVE_DEST/views/musicaview.js
    cp $JS_DIST/views/nosotrosview.js $JS_MOVE_DEST/views/nosotrosview.js
    cp $JS_DIST/views/presentacionesview.js $JS_MOVE_DEST/views/presentacionesview.js
    cp $JS_DIST/views/videosview.js $JS_MOVE_DEST/views/videosview.js

    mkdir $JS_MOVE_DEST/lib/
    cp $JS_DIST/lib/magnific-popup.min.js $JS_MOVE_DEST/lib/magnific-popup.min.js
    cp $JS_DIST/lib/echo.min.js $JS_MOVE_DEST/lib/echo.min.js
}

if [ "$1" ]; then
    $1
    exit $?
fi

clean
compile
move


define("models/comentario",["models/basemodel"],function(o){return o.extend({url:"/banda/comentario/",validate:function(o){var e=[],t=this.validateAutor(o.autor);t&&e.push({name:"autor",msg:t});var n=this.validateComentario(o.comentario);return n&&e.push({name:"comentario",msg:n}),e.length>0?e:!1},validateAutor:function(o){return this.commonValidate(o,100)},validateComentario:function(o){return this.commonValidate(o,2e3)},commonValidate:function(o,e){return o?o.length>e?"MÃ¡ximo "+e+" letras.":void 0:"Requerido."}})}),define("collections/muro",["underscore","backbone","models/comentario","collections/pagedcollection"],function(o,e,t,n){var a=n.extend({model:t,urlPart:"/banda/muro/"});return new a}),define("text!template/comentarioform.html",[],function(){return'<div id="comentario-modal" class="modal" tabindex="-1">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-body">\n        <form>\n          <div class="form-group autor">\n            <label class="control-label h3" for="autor-field">Autor</label>\n            <input id="autor-field" type="text" class="form-control"><% comentario.get(\'autor\') %></input>\n            <span class="help-block"></span>\n          </div>\n          <div class="form-group comentario">\n            <label class="control-label h3" for="comentario-field">Comentario</label>\n            <textarea id="comentario-field" rows="3" class="form-control"><% comentario.get(\'comentario\') %></textarea>\n            <span class="help-block"></span>\n          </div>\n          <button id="submit-comentario-form" type="submit" class="btn btn-default">Agregar comentario</button>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>'}),define("views/comentarioform",["jquery","underscore","backbone","bootstrap","models/comentario","text!template/comentarioform.html"],function(o,e,t,n,a,i){var r=t.View.extend({template:e.template(i),events:{submit:"submitMe"},render:function(){return this.model=new a,this.$el.html(this.template({comentario:this.model,_:e})),this.hideErrors(),this},submitMe:function(o){o.preventDefault(),this.model.set("autor",this.$("#autor-field").val()),this.model.set("comentario",this.$("#comentario-field").val()),this.model.isValid()?(this.model.save(),this.hideForm(),this.view.render()):(this.hideErrors(),this.showErrors())},showForm:function(e){this.view=e,o("#comentario-modal").modal("show")},hideForm:function(){o("#comentario-modal").modal("hide")},showErrors:function(){e.each(this.model.validationError,function(e){o("."+e.name).addClass("has-error").find(".help-block").show().text(e.msg)},this)},hideErrors:function(){this.$(".form-group").removeClass("has-error").find(".help-block").hide().text("")}});return new r}),define("text!template/muro.html",[],function(){return'\n<div class="container">\n  <header class="page-header">\n    <h1>Muro</h1>\n  </header>\n  <div class="row">\n    <div class="col-md-12">\n      <button id="add-comentario" class="btn btn-default">Agregar\n        comentario</button>\n    </div>\n  </div>\n\n  <% _.forEach(data.models, function (comentario, i) { %>\n\n  <div class="row">\n    <div class="col-md-12">\n      <blockquote class="pull-right">\n        <p class="h3"><%-comentario.get(\'texto\')%></p>\n        <small><cite><%-comentario.get(\'autor\')%></cite></small>\n      </blockquote>\n    </div>\n  </div>\n\n  <%})%> <%if (data.hasPrevious() || data.hasNext()) {%>\n  <footer class="row">\n    <div class="col-md-6">\n      <%if (data.hasPrevious()) {%>\n      <button id="previous-muro-page" class="btn btn-default pull-left">Comentarios M&aacute;s Nuevos</button>\n      <% } %>\n    </div>\n    <div class="col-md-6">\n      <%if (data.hasNext()) {%>\n      <button id="next-muro-page" class="btn btn-default pull-right">Comentarios M&aacute;s Viejos</button>\n      <% } %>\n    </div>\n  </footer>\n  <% } %>\n\n</div>'}),define("views/muroview",["underscore","bootstrap","views/collectionview","collections/muro","views/comentarioform","text!template/muro.html"],function(o,e,t,n,a,i){var r=t.extend({el:"#contenido",template:o.template(i),data:n,form:a,events:{"click #next-muro-page":"nextPage","click #previous-muro-page":"previousPage","click #add-comentario":"showForm"},showForm:function(){this.form.render(),this.$el.append(this.form.$el),this.form.showForm(this)}});return new r});
define("models/comentario",["models/basemodel"],function(e){return e.extend({url:"/banda/comentario/",validate:function(e){var o=[],t=this.validateAutor(e.autor);t&&o.push({name:"autor",msg:t});var n=this.validateComentario(e.comentario);return n&&o.push({name:"comentario",msg:n}),o.length>0?o:!1},validateAutor:function(e){return this.commonValidate(e,100)},validateComentario:function(e){return this.commonValidate(e,2e3)},commonValidate:function(e,o){return e?e.length>o?"MÃ¡ximo "+o+" letras.":void 0:"Requerido."}})}),define("collections/muro",["underscore","backbone","models/comentario","collections/pagedcollection"],function(e,o,t,n){var a=n.extend({model:t,urlPart:"/banda/muro/"});return new a}),define("text!template/comentarioform.html",[],function(){return'<div id="comentario-modal" class="modal" tabindex="-1">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-body">\n        <form>\n          <div class="form-group autor">\n            <label class="control-label h3" for="autor-field">Autor</label>\n            <input id="autor-field" type="text" class="form-control"><% comentario.get(\'autor\') %></input>\n            <span class="help-block"></span>\n          </div>\n          <div class="form-group comentario">\n            <label class="control-label h3" for="comentario-field">Comentario</label>\n            <textarea id="comentario-field" rows="3" class="form-control"><% comentario.get(\'comentario\') %></textarea>\n            <span class="help-block"></span>\n          </div>\n          <button id="submit-comentario-form" type="submit" class="btn btn-default">Agregar comentario</button>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>'}),define("views/comentarioform",["jquery","underscore","backbone","modal","models/comentario","text!template/comentarioform.html"],function(e,o,t,n,a,i){var r=t.View.extend({template:o.template(i),events:{submit:"submitMe"},render:function(){return this.model=new a,this.$el.html(this.template({comentario:this.model,_:o})),this.hideErrors(),this},submitMe:function(e){e.preventDefault(),this.model.set("autor",this.$("#autor-field").val()),this.model.set("comentario",this.$("#comentario-field").val()),this.model.isValid()?(this.model.save(),this.hideForm(),this.view.render()):(this.hideErrors(),this.showErrors())},showForm:function(o){this.view=o,e("#comentario-modal").modal("show")},hideForm:function(){e("#comentario-modal").modal("hide")},showErrors:function(){o.each(this.model.validationError,function(o){e("."+o.name).addClass("has-error").find(".help-block").show().text(o.msg)},this)},hideErrors:function(){this.$(".form-group").removeClass("has-error").find(".help-block").hide().text("")}});return new r}),define("text!template/muro.html",[],function(){return'<div class="container">\n  <button id="add-comentario" class="btn btn-default">Agregar comentario</button>\n</div>\n\n<div class="container">\n  <% _.forEach(data.models, function (comentario, i) { %>\n\n  <div class="comentario half">\n    <p class="texto"><%-comentario.get(\'texto\')%></p>\n    <p class="autor"><%-comentario.get(\'autor\')%></p>\n  </div>\n\n  <% }) %>\n\n</div>\n\n<%if (data.hasPrevious() || data.hasNext()) {%>\n<footer class="container">\n\n  <%if (data.hasPrevious()) {%>\n  <button id="previous-muro-page" class="btn btn-default pull-left">Comentarios M&aacute;s Nuevos</button>\n  <% } %>\n  <%if (data.hasNext()) {%>\n  <button id="next-muro-page" class="btn btn-default pull-right">Comentarios M&aacute;s Viejos</button>\n  <% } %>\n\n</footer>\n<% } %>'}),define("views/muroview",["underscore","views/collectionview","collections/muro","views/comentarioform","text!template/muro.html"],function(e,o,t,n,a){var i=o.extend({el:"#contenido",template:e.template(a),data:t,form:n,events:{"click #next-muro-page":"nextPage","click #previous-muro-page":"previousPage","click #add-comentario":"showForm"},showForm:function(){this.form.render(),this.$el.append(this.form.$el),this.form.showForm(this)}});return new i});
/*! echo.js v1.6.0 | (c) 2014 @toddmotto | https://github.com/toddmotto/echo */

!function(t,e){"function"==typeof define&&define.amd?define("echo",[],function(){return e(t)}):"object"==typeof exports?module.exports=e:t.echo=e(t)}(this,function(t){var e,o,n,a,i,d={},l=function(){},c=function(t,e){var o=t.getBoundingClientRect();return o.right>=e.l&&o.bottom>=e.t&&o.left<=e.r&&o.top<=e.b},s=function(){(a||!o)&&(clearTimeout(o),o=setTimeout(function(){d.render(),o=null},n))};return d.init=function(o){o=o||{};var c=o.offset||0,r=o.offsetVertical||c,f=o.offsetHorizontal||c,u=function(t,e){return parseInt(t||e,10)};e={t:u(o.offsetTop,r),b:u(o.offsetBottom,r),l:u(o.offsetLeft,f),r:u(o.offsetRight,f)},n=u(o.throttle,250),a=o.debounce!==!1,i=!!o.unload,l=o.callback||l,d.render(),document.addEventListener?(t.addEventListener("scroll",s,!1),t.addEventListener("load",s,!1)):(t.attachEvent("onscroll",s),t.attachEvent("onload",s))},d.render=function(){for(var o,n,a=document.querySelectorAll("img[data-echo]"),s=a.length,r={l:0-e.l,t:0-e.t,b:(t.innerHeight||document.documentElement.clientHeight)+e.b,r:(t.innerWidth||document.documentElement.clientWidth)+e.r},f=0;s>f;f++)n=a[f],c(n,r)?(i&&n.setAttribute("data-echo-placeholder",n.src),n.src=n.getAttribute("data-echo"),i||n.removeAttribute("data-echo"),l(n,"load")):i&&(o=n.getAttribute("data-echo-placeholder"))&&(n.src=o,n.removeAttribute("data-echo-placeholder"),l(n,"unload"));s||d.detach()},d.detach=function(){document.removeEventListener?t.removeEventListener("scroll",s):t.detachEvent("onscroll",s),clearTimeout(o)},d}),define("models/foto",["models/basemodel"],function(t){return t.extend({})}),define("collections/fotos",["models/foto","collections/pagedcollection"],function(t,e){var o=e.extend({model:t,urlPart:"/banda/fotos/"});return new o}),define("text!template/fotos.html",[],function(){return'\n<div class="container">\n  <header class="page-header">\n    <h1>Fotos</h1>\n  </header>\n\n  <%_.forEach(data.models, function (foto, i) {%> <%if (i % 4 === 0) {%>\n  <div class="row">\n    <%}%>\n\n    <div class="col-md-3">\n      <a class="thumbnail" href="#" data-toggle="modal" data-target="#modal-foto-<%=i%>"> \n        <img src="/static/img/img_load.gif" class="img-responsive" data-echo="<%=foto.get(\'thumbnail\')%>">\n      </a>\n    </div>\n\n    <div class="modal" id="modal-foto-<%=i%>" tabindex="-1">\n      <div class="modal-dialog">\n        <div class="modal-content">\n          <div class="modal-body">\n            <img src="/static/img/img_load.gif" class="img-responsive" data-echo="<%=foto.get(\'url\')%>">\n          </div>\n          <%if (foto.get(\'descripcion\').length > 0) {%>\n          <div class="modal-footer">\n            <p><%=foto.get(\'descripcion\')%></p>\n          </div>\n          <% } %>\n        </div>\n      </div>\n    </div>\n\n    <%if (i % 4 === 3 || i === (data.length - 1)) {%>\n  </div>\n  <% } %> <% }) %> <%if (data.hasPrevious() || data.hasNext()) {%>\n  <footer class="row">\n    <div class="col-md-6">\n      <%if (data.hasPrevious()) {%>\n      <button id="previous-fotos-page" class="btn btn-default pull-left">Fotos M&aacute;s Nuevas</button>\n      <% } %>\n    </div>\n    <div class="col-md-6">\n      <%if (data.hasNext()) {%>\n      <button id="next-fotos-page" class="btn btn-default pull-right">Fotos M&aacute;s Viejas</button>\n      <% } %>\n    </div>\n  </footer>\n  <% } %>\n</div>'}),define("views/fotosview",["underscore","echo","bootstrap","views/collectionview","collections/fotos","text!template/fotos.html"],function(t,e,o,n,a,i){var d=n.extend({data:a,template:t.template(i),events:{"click #next-fotos-page":"nextPage","click #previous-fotos-page":"previousPage"},afterRender:function(){e.init()}});return new d});
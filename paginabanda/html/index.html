{% load staticfiles %}

<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

<!--<title>Nenes Bian</title>-->

<meta name="description" content="">
<meta name="viewport" content="width=device-width">

<meta name="author" content="Agustin Krapovickas">

<noscript>
  <meta http-equiv="refresh" content="0;url=/noscript/"/>
</noscript>

<!--[if lt IE 9]>
  <meta http-equiv="refresh" content="0;url=/oldbrowser/"/>
<![endif]-->

<link rel="shortcut icon" href="{% static 'img/favicon.ico' %}" />

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

<link href='//fonts.googleapis.com/css?family=Indie+Flower' rel='stylesheet' type='text/css'>

<link rel="stylesheet" href="{% static 'css/main.css' %}">

</head>
<body>
  <div id="loader">
  	<img src="/static/img/load.gif" class="img-responsive center" alt="Cargando...">
  </div>

  <header id="navigation" class="navbar-fixed-top">
    <nav class="container">
      <ul class="nav masthead-nav pull-right">
        <li><a href="#inicio">inicio</a></li>
        <li><a href="#nosotros">nosotros</a></li>
        <li><a href="#musica">musica</a></li>
        <li><a href="#videos">videos</a></li>
        <li><a href="#fotos">fotos</a></li>
        <li><a href="#muro">muro</a></li>
        <li><a href="#presentaciones">pr√≥ximas fechas</a></li>
        <li><a href="#contacto">contacto</a></li>
      </ul>
    </nav>
  </header>

  <section id="inicio">
    <img id="logo" src="" class="img-responsive center" alt="Nenes Bian">
  </section>

  <section id="nosotros"></section>

  <section id="musica"></section>

  <section id="videos"></section>

  <section id="fotos"></section>

  <section id="muro"></section>

  <section id="presentaciones"></section>

  <section id="contacto"></section>

  <div class="modal" id="error-msg-modal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-body">
          <dialog class"alert alert-warning">
            <p class="text-center"><strong>Mmm... Parece que el servidor est&aacute; teniendo alg&uacute;n problema.</strong></p>
            <p class="text-center">Por favor Intent&aacute; de nuevo mas tarde.</p>
          </dialog>
         </div>
       </div>
     </div>
  </div>

  <script type="text/html" id="nosotros-template">
    <div class="container">
      <header class="page-header">
        <h1>Nosotros</h1>
      </header>
      <div class="row">
        <div class="col-md-12"><%= nosotros.texto %></div>
      </div>
    </div>
  </script>

  <script type="text/html" id="musica-template">
    <div class="container">
      <header class="page-header">
        <h1>Musica</h1>
      </header>

      <%_.forEach(musica, function (album, i) {%>

      <div class="row">
        <div class="col-md-6">
          <div class="thumbnail">
            <img src="/static/img/img_load.gif" class="img-responsive" data-echo="<%=album.get('tapa')%>" alt="Tapa de <%=album.get('nombre')%>">
          </div>
        </div>
        <div class="col-md-6">
          <h2><%=album.get('nombre')%></h2>
          <p class="h4"><%=album.get('descripcion')%><p>
          <ol>
          <%_.forEach(album.get('canciones'), function (cancion, j) {%>
  	        <li>
              <% if (cancion.url && cancion.url.contains('soundcloud')) { %>
	          <a href="#" data-toggle="modal" data-target="#myModal<%=i%><%=j%>">
                <%=cancion.nombre%>
              </a>
              <% } else if (cancion.url) { %>
	          <a href="<%=decodeURIComponent(cancion.url)%>">
                <%=cancion.nombre%>
              </a>
               <% } else { %>
	          <p class="cancion"><%=cancion.nombre%></p>
              <% } %>
            </li>

            <% if (cancion.url && cancion.url.contains('soundcloud')) { %>
            <div class="modal" id="myModal<%=i%><%=j%>" tabindex="-1">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-body">
                    <iframe width="558" src="//w.soundcloud.com/player/?url=<%=cancion.url%>" frameborder="0" allowfullscreen></iframe>
                  </div>
                </div>
              </div>
            </div>
            <% } %>

          <%})%>
          </ol>
        </div>
      </div>
      <%})%>
    </div>
  </script>

  <script type="text/html" id="videos-template">
    <div class="container">
      <header class="page-header">
        <h1>Videos</h1>
      </header>

      <%_.forEach(collection.models, function (video, i) {%>
        <%if (i % 3 === 0) {%>
      <div class="row">
        <%}%>

        <div class="col-md-4">
          <a class="thumbnail" href="#" data-toggle="modal" data-target="#modal-video-<%=i%>">
            <img src="/static/img/img_load.gif" class="img-responsive" alt="<%=video.get('nombre')%>" data-echo="<%=video.get('thumbnail')%>">
          </a>
        </div>

        <div class="modal" id="modal-video-<%=i%>" tabindex="-1">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <%if (video.get('nombre').length > 0) {%>
              <div class="modal-header">
                <h2><%=video.get('nombre')%></h2>
              </div>
              <% } %>
              <div class="modal-body">
                <iframe width="853" height="480" src="<%=video.get('embed')%>" frameborder="0" allowfullscreen></iframe>
              </div>
              <%if (video.get('descripcion').length > 0) {%>
              <div class="modal-footer">
                <p><%=video.get('descripcion')%></p>
              </div>
              <% } %>
            </div>
          </div>
        </div>

        <%if (i % 3 === 2 || i === (videos.length - 1)) {%>
      </div>
        <%}%>
      <%})%>

      <%if (collection.hasPrevious() || collection.hasNext()) {%>
      <div class="row">
        <div class="col-md-6">
          <%if (collection.hasPrevious()) {%>
          <button id="previous-page" class="btn btn-default pull-left">Videos M&aacute;s Nuevos</button>
          <% } %>
        </div>
        <div class="col-md-6">
          <%if (collection.hasNext()) {%>
          <button id="next-page" class="btn btn-default pull-right">Videos M&aacute;s Viejos</button>
          <% } %>
        </div>
      </div>
      <% } %>

    </div>
  </script>

  <script type="text/html" id="fotos-template">
    <div class="container">
      <header class="page-header">
        <h1>Fotos</h1>
      </header>

      <%_.forEach(collection.models, function (foto, i) {%>
        <%if (i % 4 === 0) {%>
      <div class="row">
        <%}%>

        <div class="col-md-3">
          <a class="thumbnail" href="#" data-toggle="modal" data-target="#modal-foto-<%=i%>">
            <img src="/static/img/img_load.gif" class="img-responsive" data-echo="<%=foto.get('thumbnail')%>">
          </a>
        </div>

        <div class="modal" id="modal-foto-<%=i%>" tabindex="-1">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body">
                <img src="/static/img/img_load.gif" class="img-responsive" data-echo="<%=foto.get('url')%>">
              </div>
              <%if (foto.get('descripcion').length > 0) {%>
              <div class="modal-footer">
                <p><%=foto.get('descripcion')%></p>
              </div>
              <% } %>
            </div>
          </div>
        </div>

        <%if (i % 4 === 3 || i === (collection.length - 1)) {%>
      </div>
        <% } %>
      <% }) %>

      <%if (collection.hasPrevious() || collection.hasNext()) {%>
      <div class="row">
        <div class="col-md-6">
          <%if (collection.hasPrevious()) {%>
          <button id="previous-page" class="btn btn-default pull-left">Fotos M&aacute;s Nuevas</button>
          <% } %>
        </div>
        <div class="col-md-6">
          <%if (collection.hasNext()) {%>
          <button id="next-page" class="btn btn-default pull-right">Fotos M&aacute;s Viejas</button>
          <% } %>
        </div>
      </div>
      <% } %>
    </div>
  </script>

  <script type="text/html" id="muro-template">
    <div class="container">
      <header class="page-header">
        <h1>Muro</h1>
      </header>
      <div class="row">
        <div class="col-md-12">
            <button id="add-comentario" class="btn btn-default">Agregar comentario</button>
        </div>
      </div>

      <% _.forEach(collection.models, function (comentario, i) { %>

      <div class="row">
        <div class="col-md-12">
          <blockquote class="pull-right">
            <p class="h3"><%-comentario.get('texto')%></p>
            <small><cite><%-comentario.get('autor')%></cite></small>
          </blockquote>
        </div>
      </div>

      <%})%>

      <%if (collection.hasPrevious() || collection.hasNext()) {%>
      <div class="row">
        <div class="col-md-6">
          <%if (collection.hasPrevious()) {%>
          <button id="previous-page" class="btn btn-default pull-left">Comentarios M&aacute;s Nuevos</button>
          <% } %>
        </div>
        <div class="col-md-6">
          <%if (collection.hasNext()) {%>
          <button id="next-page" class="btn btn-default pull-right">Comentarios M&aacute;s Viejos</button>
          <% } %>
        </div>
      </div>
      <% } %>

    </div>
  </script>

  <script id="add-comentario-form" type="text/html">
    <div id="add-comentario-modal" class="modal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-body">
            <form>
              <div class="form-group autor">
                <label class="control-label h2" for="autor-field">Autor</label>
                <input id="autor-field" type="text" class="form-control"></input>
                <span class="help-block"></span>
              </div>
              <div class="form-group comentario">
                <label class="control-label h2" for="comentario-field">Comentario</label>
                <textarea id="comentario-field" rows="3" class="form-control"></textarea>
                <span class="help-block"></span>
              </div>
              <button id="submit-comentario-form" type="submit" class="btn btn-default">Agregar comentario</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </script>

  <script type="text/html" id="presentaciones-template">
    <div class="container">
      <header class="page-header">
        <h1>Proximas fechas</h1>
      </header>

      <%_.forEach(presentaciones, function (presentacion) {%>

      <div class="row">
        <div class="col-md-12">
          <p class="h2"><%=presentacion.get('lugar')%></p>
          <p class="h3"><%=presentacion.get('descripcion')%></p>
          <dl class="dl-horizontal h4">
            <dt>Direcci&oacute;n</dt>
            <dd><%=presentacion.get('direccion')%></dd>
            <dt>Fecha</dt>
            <dd><%=presentacion.get('fecha')%></dd>
            <dt>Hora</dt>
            <dd><%=presentacion.get('hora')%></dd>
          </dl>
        </div>
      </div>

      <%})%>
    </div>
  </script>

  <script type="text/html" id="contacto-template">
    <div class="container">
      <header class="page-header">
        <h1>Contacto</h1>
      </header>
      <div class="row">
        <div class="col-md-12"><%= contacto.texto %></div>
      </div>
    </div>
  </script>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.0/backbone-min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script>
  <!-- <script src="//cdn.jsdelivr.net/echo/1.2.0/echo.min.js"></script>-->

  <script src="{% static 'js/echo.js' %}"></script>
  <script src="{% static 'js/banda.js' %}"></script>

  </body>
</html>
